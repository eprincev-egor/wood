<script>"use strict";const canvas=document.createElement("canvas");canvas.style.position="fixed",canvas.style.width="100%",canvas.style.height="100%";const gl=canvas.getContext("webgl");let width,height,program,positionLocation,colorLocation,matrixLocation,positionBuffer,colorBuffer,camera={x:140,y:0};function createShader(t,e){let o=gl.createShader(t);return gl.shaderSource(o,e),gl.compileShader(o),o}function createProgram(t,e){let o=gl.createProgram();return gl.attachShader(o,t),gl.attachShader(o,e),gl.linkProgram(o),o}function main(){document.body.appendChild(canvas);let t=createShader(gl.VERTEX_SHADER,"\n        attribute vec4 a_position;\n        attribute vec4 a_color;\n        \n        uniform mat4 u_matrix;\n        \n        varying vec4 v_color;\n        \n        void main() {\n            // Multiply the position by the matrix.\n            gl_Position = u_matrix * a_position;\n            \n            // Pass the color to the fragment shader.\n            v_color = a_color;\n        }\n    "),e=createShader(gl.FRAGMENT_SHADER,"\n        precision mediump float;\n\n        // Passed in from the vertex shader.\n        varying vec4 v_color;\n        \n        void main() {\n            gl_FragColor = v_color;\n        }\n    ");program=createProgram(t,e),positionLocation=gl.getAttribLocation(program,"a_position"),colorLocation=gl.getAttribLocation(program,"a_color"),matrixLocation=gl.getUniformLocation(program,"u_matrix"),positionBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,positionBuffer),setGeometry(gl),colorBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,colorBuffer),setColors(gl),drawScene()}function degToRad(t){return t*Math.PI/180}function drawScene(){width=canvas.width=document.body.offsetWidth,height=canvas.height=document.body.offsetHeight;let t,e,o,a,r,n=degToRad(60);gl.viewport(0,0,gl.canvas.width,gl.canvas.height),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),gl.enable(gl.CULL_FACE),gl.enable(gl.DEPTH_TEST),gl.useProgram(program),gl.enableVertexAttribArray(positionLocation),gl.bindBuffer(gl.ARRAY_BUFFER,positionBuffer),t=3,e=gl.FLOAT,o=!1,a=0,r=0,gl.vertexAttribPointer(positionLocation,t,e,o,a,r),gl.enableVertexAttribArray(colorLocation),gl.bindBuffer(gl.ARRAY_BUFFER,colorBuffer),t=3,e=gl.UNSIGNED_BYTE,o=!0,a=0,r=0,gl.vertexAttribPointer(colorLocation,t,e,o,a,r);let i=gl.canvas.clientWidth/gl.canvas.clientHeight,l=m4.perspective(n,i,1,2e3),c=m4.translation(camera.x,-camera.y,400),g=m4.inverse(c),s=m4.multiply(l,g);for(let t=0;t<1;++t){let e=t*Math.PI*2/1,o=200*Math.cos(e),a=200*Math.sin(e),r=m4.translate(s,o,0,a);gl.uniformMatrix4fv(matrixLocation,!1,r);let n=gl.TRIANGLES,i=0,l=36;gl.drawArrays(n,i,l)}}let m4={perspective(t,e,o,a){let r=Math.tan(.5*Math.PI-.5*t),n=1/(o-a);return[r/e,0,0,0,0,r,0,0,0,0,(o+a)*n,-1,0,0,o*a*n*2,0]},multiply(t,e){let o=t[0],a=t[1],r=t[2],n=t[3],i=t[4],l=t[5],c=t[6],g=t[7],s=t[8],m=t[9],u=t[10],f=t[11],h=t[12],d=t[13],R=t[14],p=t[15],y=e[0],v=e[1],A=e[2],_=e[3],B=e[4],b=e[5],x=e[6],E=e[7],F=e[8],L=e[9],M=e[10],S=e[11],T=e[12],P=e[13],w=e[14],C=e[15];return[y*o+v*i+A*s+_*h,y*a+v*l+A*m+_*d,y*r+v*c+A*u+_*R,y*n+v*g+A*f+_*p,B*o+b*i+x*s+E*h,B*a+b*l+x*m+E*d,B*r+b*c+x*u+E*R,B*n+b*g+x*f+E*p,F*o+L*i+M*s+S*h,F*a+L*l+M*m+S*d,F*r+L*c+M*u+S*R,F*n+L*g+M*f+S*p,T*o+P*i+w*s+C*h,T*a+P*l+w*m+C*d,T*r+P*c+w*u+C*R,T*n+P*g+w*f+C*p]},translation:(t,e,o)=>[1,0,0,0,0,1,0,0,0,0,1,0,t,e,o,1],xRotation(t){let e=Math.cos(t),o=Math.sin(t);return[1,0,0,0,0,e,o,0,0,-o,e,0,0,0,0,1]},yRotation(t){let e=Math.cos(t),o=Math.sin(t);return[e,0,-o,0,0,1,0,0,o,0,e,0,0,0,0,1]},zRotation(t){let e=Math.cos(t),o=Math.sin(t);return[e,o,0,0,-o,e,0,0,0,0,1,0,0,0,0,1]},scaling:(t,e,o)=>[t,0,0,0,0,e,0,0,0,0,o,0,0,0,0,1],translate:(t,e,o,a)=>m4.multiply(t,m4.translation(e,o,a)),xRotate:(t,e)=>m4.multiply(t,m4.xRotation(e)),yRotate:(t,e)=>m4.multiply(t,m4.yRotation(e)),zRotate:(t,e)=>m4.multiply(t,m4.zRotation(e)),scale:(t,e,o,a)=>m4.multiply(t,m4.scaling(e,o,a)),inverse(t){let e=t[0],o=t[1],a=t[2],r=t[3],n=t[4],i=t[5],l=t[6],c=t[7],g=t[8],s=t[9],m=t[10],u=t[11],f=t[12],h=t[13],d=t[14],R=t[15],p=m*R,y=d*u,v=l*R,A=d*c,_=l*u,B=m*c,b=a*R,x=d*r,E=a*u,F=m*r,L=a*c,M=l*r,S=g*h,T=f*s,P=n*h,w=f*i,C=n*s,U=g*i,I=e*h,D=f*o,Y=e*s,k=g*o,H=e*i,G=n*o,N=p*i+A*s+_*h-(y*i+v*s+B*h),W=y*o+b*s+F*h-(p*o+x*s+E*h),z=v*o+x*i+L*h-(A*o+b*i+M*h),O=B*o+E*i+M*s-(_*o+F*i+L*s),V=1/(e*N+n*W+g*z+f*O);return[V*N,V*W,V*z,V*O,V*(y*n+v*g+B*f-(p*n+A*g+_*f)),V*(p*e+x*g+E*f-(y*e+b*g+F*f)),V*(A*e+b*n+M*f-(v*e+x*n+L*f)),V*(_*e+F*n+L*g-(B*e+E*n+M*g)),V*(S*c+w*u+C*R-(T*c+P*u+U*R)),V*(T*r+I*u+k*R-(S*r+D*u+Y*R)),V*(P*r+D*c+H*R-(w*r+I*c+G*R)),V*(U*r+Y*c+G*u-(C*r+k*c+H*u)),V*(P*m+U*d+T*l-(C*d+S*l+w*m)),V*(Y*d+S*a+D*m-(I*m+k*d+T*a)),V*(I*l+G*d+w*a-(H*d+P*a+D*l)),V*(H*m+C*a+k*l-(Y*l+G*m+U*a))]},vectorMultiply:function(t,e){let o=[];for(let a=0;a<4;++a){o[a]=0;for(let r=0;r<4;++r)o[a]+=t[r]*e[4*r+a]}return o}};function setGeometry(t){let e=new Float32Array([-50,-50,-50,-50,50,-50,50,-50,-50,-50,50,-50,50,50,-50,50,-50,-50,-50,-50,50,50,-50,50,-50,50,50,-50,50,50,50,-50,50,50,50,50,-50,50,-50,-50,50,50,50,50,-50,-50,50,50,50,50,50,50,50,-50,-50,-50,-50,50,-50,-50,-50,-50,50,-50,-50,50,50,-50,-50,50,-50,50,-50,-50,-50,-50,-50,50,-50,50,-50,-50,-50,50,-50,50,50,-50,50,-50,50,-50,-50,50,50,-50,50,-50,50,50,-50,50,50,50,-50,50,50,50]),o=m4.xRotation(Math.PI);o=m4.translate(o,-50,-75,-15);for(let t=0;t<e.length;t+=3){let a=m4.vectorMultiply([e[t+0],e[t+1],e[t+2],1],o);e[t+0]=a[0],e[t+1]=a[1],e[t+2]=a[2]}t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)}function setColors(t){t.bufferData(t.ARRAY_BUFFER,new Uint8Array([200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,200,70,120,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200,80,70,200]),t.STATIC_DRAW)}setTimeout(main),document.onkeydown=(t=>{37==t.keyCode&&(camera.x-=10),38==t.keyCode&&(camera.y-=10),39==t.keyCode&&(camera.x+=10),40==t.keyCode&&(camera.y+=10),drawScene()});</script>